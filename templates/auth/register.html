{% extends './base.html' %}

{% block title %}Register{% endblock %}


{% block body %}
<form id="register-form" action="/register" method="POST">
    <input type="text" id="userName" name="userName">
    <input type="text" id="email" name="email">
    <input type="text" id="password" name="password">
    <input type="submit">
</form>
{% endblock %}


{% block customJS %}
<script>
    var formulario = document.getElementById('register-form');
    var userName = document.getElementById('userName');
    var email = document.getElementById('email');
    var password = document.getElementById('password');

    formulario.onsubmit = (e) =>{
        e.preventDefault();
        fetch('/register', {
            method: 'POST',
            body: JSON.stringify({
                'userName': userName.value,
                'email': email.value,
                'password': password.value
            }),
            headers: {
                'Content-Type': 'application/json'
            }
        }).then(res=>res.json()).then(data=>{
            if(data.status==="success"){
                window.location.href = '/login';
            }else{
                alert(data.message);
            }
        });
    }
</script>
{% endblock %}