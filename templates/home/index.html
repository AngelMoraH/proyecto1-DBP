{% extends './base.html' %}

{% block title %}HorrorPedia{% endblock %}
{% block customCSS %}
<style>
    .container-movies {
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
        align-items: flex-start;
    }
    .container-movies img {
        width: 260px;
        height: 290px;
    }
    .container_info__movies{
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: flex-start;
        height: 7rem;
        width: 70%;
        margin-left: 10px;
    }
    .statsnode p,.statsnode h2 {
        text-align: left;
    }
</style>
{% endblock %}

{% block body %}
<p></p>

<hr>


<div style = "position:relative;
display:block; left:0;">
<ol class = "bigbox">
    <li class = "rbox">
        <div class = "littlebox">
            <h1 style = "color:#F8F8FF";>BIENVENIDO A HORRORPEDIA {{user['userName']}}</h1> 
        </div>
        <ol>
            <li class = "foro2">
                <div class = "chop" >
                    <br>
                <h2>Qué es Horrorpedia?
                </h2>
                </div>
            </li>
            <li class = "foro2">
                <div class = "div">
                    Horrorpedia es un foro en el que podrás encontrar historias inéditas y fantásticas.
                    En esta pagina no buscamos probar verdades tras las curiosidades y/o acontecimientos siniestros de la historia y el mundo contemporáneo. Verdadero o falso, verídico o desmentido, su objetivo primordial es solo entretener a la gente.
                </div>
            </li>
            <li class = "foro2">
                <div class= "div">
                </div>
            </li>
            <li class = "foro2">
                <div class = "div">
                </div>
            </li>
            <li class = foro2>
            </li>
        </ol>
    </li>   
    <ol>
    </ol> 
</ol>
</div>
<div id="container-movies">

</div>
<div></div>
{% endblock %}

{% block customJS %}
<script>
    var likes;
    var userID = "{{user.id}}";
    
    listMoviesUI = document.getElementById('container-movies');
    
    const showMovies = async () => {
        listMoviesUI.innerHTML = '';
        const response = await fetch('movies/')
        const movies = await response.json();
        
        movies.movies.forEach(movie => {
            listMoviesUI.innerHTML += `
            <div id="${movie.id}" class="rbox" >
                <h3 class = "littlebox" >${movie.data['nombre']}</h3>
                <div class = "bloque container-movies">               
                    <img  src="${movie.data['imagenURL']}" alt="logo">
                    <div class="container_info__movies">
                        <div class = "mainnode">
                            <div class = "bodynode">
                                <div class = "statsnode">                            
                                    <h2>${movie.data['fechaEstreno']}</h2>    
                                    <p >Calificacion:  ${movie.data['calificacion']}</p>
                                    </div>
                            </div>
                        </div>
                        <a class="button" href="/movie/${movie.id}/">Explorar detalles</a>
                    </div>
                </div>
            </div>
            `
        });
    }

    document.addEventListener('DOMContentLoaded', showMovies);

</script>
{% endblock %}